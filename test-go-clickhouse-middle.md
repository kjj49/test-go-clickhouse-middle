# Тестовое задание 

## GO/ClickHouse middle


###Цель:
Разработать микросервис для обработки и хранения событий. Ваше решение должно демонстрировать понимание работы с базами данных, принципов API и контейнеризации.

###Требования:
1. Код приложения:
    * Язык программирования: Go.
    * Взаимодействие с базой данных ClickHouse.
    * Код должен быть хорошо структурирован и покрыт комментариями.
    * Код должен сопровождаться unit-тестами.
2. База данных:
    * Использовать ClickHouse.
    * Предоставить скрипты для создания и миграций таблиц.
3. API:
    * Реализовать JSON API для вставки событий.
    * Документировать API с использованием Swagger или аналогичных инструментов.
4. Контейнеризация:
    * Весь сервис должен быть упакован в Docker контейнер.
    * Предоставить Dockerfile и docker-compose.yml (если нужно).
5. Конфигурация:
    * Использование .env файла для конфигурации приложения.
    * Предоставить пример файла конфигурации.
6. Логирование:
    * Настроить логирование действий и ошибок.
7. Валидация:
    * Валидация входящих данных перед обработкой

## Тестовая таблица для всех задач

```sql
CREATE TABLE events (
    eventID Int64,
    eventType String,
    userID Int64,
    eventTime DateTime,
    payload String
) ENGINE = MergeTree
ORDER BY (eventID, eventTime);
```

### Задача 1

Написать SQL-запросы для ClickHouse:

1. Выборки всех уникальных eventType у которых более 1000 событий.
2. Выборки событий которые произошли в первый день каждого месяца.
3. Выборки пользователей которые совершили более 3 различных eventType.

### Задача 2

Реализовать на GO:

1. Вставку тестовых данных в таблицу events.
2. Вывод событий по заданному eventType и временному диапазону.

### Задача 3

Реализовать на GO JSON API с методом отправки события в ClickHouse. Пример запроса:

```
POST /api/event
{
  "eventType": "login",
  "userID": 1,
  "eventTime": "2023-04-09 13:00:00",
  "payload": "{\"some_field\":\"some_value\"}"
}
```


### Дополнительные указания:
Все операции с базой данных должны обрабатывать потенциальные ошибки и корректно управлять соединениями.

Убедитесь, что ваше приложение может быть запущено в любой среде с помощью Docker.

Задачи теста необходимо рассматривать как реальные и выполнять как в рабочей обстановке: вникнуть в условия каждой задачи, очень внимательно разбораться в деталях и выяснить, что в итоге требуется сделать и как именно.

### Срок выполнения:
3 часа, без учета подготовки необходимого окружения. Результат выполнения необходимо предоставить в виде ссылки на расшаренный репозиторий (GitHub, GitLab).